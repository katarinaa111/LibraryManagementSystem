<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Library Management System - SPA</title>
    <!-- Custom fonts for this template-->
    <link
      href="vendor/fontawesome-free/css/all.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
      rel="stylesheet"
    />
    <!-- Custom styles for this template-->
    <link href="css/sb-admin-2.min.css" rel="stylesheet" />
    <link href="css/spapp.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    />
    <link href="css/custom.css" rel="stylesheet" />
  </head>
  <body id="page-top">
    <!-- Page Wrapper -->
    <div id="wrapper">
      <!-- Sidebar -->
      <ul
        class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion"
        id="accordionSidebar"
      >
        <!-- Sidebar - Brand -->
        <a
          class="sidebar-brand d-flex align-items-center justify-content-center"
          href="#dashboard"
          id="menuDashboard"
        >
          <div class="sidebar-brand-icon rotate-n-15">
            <i class="fas fa-book"></i>
          </div>
          <div class="sidebar-brand-text mx-3">Library SPA</div>
        </a>
        <hr class="sidebar-divider my-0" />
        <li class="nav-item active" id="menuDashboardItem">
          <a class="nav-link" href="#dashboard">
            <i class="fas fa-fw fa-bookmark"></i>
            <span>Dashboard</span></a
          >
        </li>
        <hr class="sidebar-divider" />
        <div class="sidebar-heading">Library</div>
        <li class="nav-item" id="menuBorrowing">
          <a class="nav-link collapsed" href="#borrowing" aria-expanded="true">
            <i class="fas fa-fw fa-book-open"></i>
            <span>Borrowing Books</span>
          </a>
        </li>
        <li class="nav-item" id="menuBooks">
          <a class="nav-link collapsed" href="#books" aria-expanded="true">
            <i class="fas fa-fw fa-book"></i>
            <span>Books</span>
          </a>
        </li>
        <li class="nav-item" id="menuAuthors">
          <a class="nav-link collapsed" href="#authors" aria-expanded="true">
            <i class="fas fa-fw fa-user-edit"></i>
            <span>Authors</span>
          </a>
        </li>
        <li class="nav-item" id="menuCategories">
          <a class="nav-link collapsed" href="#categories" aria-expanded="true">
            <i class="fas fa-fw fa-tags"></i>
            <span>Categories</span>
          </a>
        </li>
        <li class="nav-item" id="menuMembers">
          <a class="nav-link collapsed" href="#members" aria-expanded="true">
            <i class="fas fa-fw fa-user"></i>
            <span>Members</span>
          </a>
        </li>
        <hr class="sidebar-divider" />
        <div class="sidebar-heading">User</div>
        <li class="nav-item" id="menuSettings">
          <a class="nav-link collapsed" href="#settings" aria-expanded="true">
            <i class="fas fa-fw fa-cogs"></i>
            <span>Settings</span>
          </a>
        </li>

        <hr class="sidebar-divider d-none d-md-block" />
        <div class="text-center d-none d-md-inline">
          <button class="rounded-circle border-0" id="sidebarToggle"></button>
        </div>
      </ul>
      <!-- End of Sidebar -->
      <!-- Content Wrapper -->
      <div id="content-wrapper" class="d-flex flex-column">
        <!-- Main Content -->
        <div id="content">
          <!-- Topbar -->
          <nav
            class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow"
          >
            <!-- Sidebar Toggle (Topbar) -->
            <button
              id="sidebarToggleTop"
              class="btn btn-link d-md-none rounded-circle mr-3"
            >
              <i class="fa fa-bars"></i>
            </button>

            <!-- Topbar Search -->
            <form
              class="d-none d-sm-inline-block form-inline mr-auto ml-md-3 my-2 my-md-0 mw-100 navbar-search"
            >
              <div class="input-group">
                <input
                  type="text"
                  class="form-control bg-light border-0 small"
                  placeholder="Search for..."
                  aria-label="Search"
                  aria-describedby="basic-addon2"
                />
                <div class="input-group-append">
                  <button class="btn btn-primary" type="button">
                    <i class="fas fa-search fa-sm"></i>
                  </button>
                </div>
              </div>
            </form>

            <!-- Topbar Navbar -->
            <ul class="navbar-nav ml-auto">
              <!-- Nav Item - Search Dropdown (Visible Only XS) -->
              <li class="nav-item dropdown no-arrow d-sm-none">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  id="searchDropdown"
                  role="button"
                  data-toggle="dropdown"
                  aria-haspopup="true"
                  aria-expanded="false"
                >
                  <i class="fas fa-search fa-fw"></i>
                </a>
                <!-- Dropdown - Messages -->
                <div
                  class="dropdown-menu dropdown-menu-right p-3 shadow animated--grow-in"
                  aria-labelledby="searchDropdown"
                ></div>
              </li>

              <!-- Nav Item - Messages -->
              <li class="nav-item dropdown no-arrow mx-1">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  id="messagesDropdown"
                  role="button"
                  data-toggle="dropdown"
                  aria-haspopup="true"
                  aria-expanded="false"
                >
                  <i class="fas fa-envelope fa-fw"></i>
                  <!-- Counter - Messages -->
                  <span class="badge badge-danger badge-counter">7</span>
                </a>
                <!-- Dropdown - Messages -->
                <div
                  class="dropdown-list dropdown-menu dropdown-menu-right shadow animated--grow-in"
                  aria-labelledby="messagesDropdown"
                >
                  <h6 class="dropdown-header">Message Center</h6>
                  <a class="dropdown-item d-flex align-items-center" href="#">
                    <div class="dropdown-list-image mr-3">
                      <img
                        class="rounded-circle"
                        src="assets/undraw_profile_1.svg"
                        alt="..."
                      />
                      <div class="status-indicator bg-success"></div>
                    </div>
                    <div class="font-weight-bold">
                      <div class="small text-gray-500">Emily Fowler · 58m</div>
                    </div>
                  </a>
                  <a class="dropdown-item d-flex align-items-center" href="#">
                    <div class="dropdown-list-image mr-3">
                      <img
                        class="rounded-circle"
                        src="assets/undraw_profile_2.svg"
                        alt="..."
                      />
                      <div class="status-indicator"></div>
                    </div>
                    <div>
                      <div class="small text-gray-500">Jae Chun · 1d</div>
                    </div>
                  </a>
                  <a class="dropdown-item d-flex align-items-center" href="#">
                    <div class="dropdown-list-image mr-3">
                      <img
                        class="rounded-circle"
                        src="assets/undraw_profile_3.svg"
                        alt="..."
                      />
                      <div class="status-indicator bg-warning"></div>
                    </div>
                    <div>
                     
                  
                      
                    
                    
                </div>
              </li>

              <div class="topbar-divider d-none d-sm-block"></div>

              <!-- Nav Item - User Information -->
              <li class="nav-item dropdown no-arrow">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  id="userDropdown"
                  role="button"
                  data-toggle="dropdown"
                  aria-haspopup="true"
                  aria-expanded="false"
                >
                  <span id="topbarUserName" class="mr-2 d-none d-lg-inline text-gray-600 small"></span>
                  <img
                    class="img-profile rounded-circle"
                    src="assets/undraw_profile.svg"
                  />
                </a>
                <!-- Dropdown - User Information -->
                <div
                  class="dropdown-menu dropdown-menu-right shadow animated--grow-in"
                  aria-labelledby="userDropdown"
                >
                  
                 
                  <a
                    class="dropdown-item"
                    href="#"
                    data-toggle="modal"
                    data-target="#logoutModal"
                  >
                    <i
                      class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"
                    ></i>
                    Logout
                  </a>
                </div>
              </li>
            </ul>
          </nav>
          <!-- End of Topbar -->
          <!-- SPA Main Section -->
          <main id="spapp" role="main">
            <section id="dashboard" data-load="dashboard.html"></section>
            <section id="books" data-load="books.html"></section>
            <section id="authors" data-load="authors.html"></section>
            <section id="categories" data-load="categories.html"></section>
            <section id="borrowing" data-load="borrowing-books.html"></section>
            <section id="members" data-load="members.html"></section>
            <section id="settings" data-load="settings.html"></section>
            
          </main>
        </div>
        <!-- End of Main Content -->
        <!-- Footer -->
        <footer class="sticky-footer bg-white">
          <div class="container my-auto">
            <div class="copyright text-center my-auto">
              <span>Copyright &copy; Library SPA 2025</span>
            </div>
          </div>
        </footer>
        <!-- End of Footer -->
      </div>
      <!-- End of Content Wrapper -->
    </div>
    <!-- End of Page Wrapper -->
    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
      <i class="fas fa-angle-up"></i>
    </a>
    <!-- Logout Modal-->
    <div
      class="modal fade"
      id="logoutModal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
            <button
              class="close"
              type="button"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body">
            Select "Logout" below if you are ready to end your current session.
          </div>
          <div class="modal-footer">
            <button
              class="btn btn-secondary"
              type="button"
              data-dismiss="modal"
            >
              Cancel
            </button>
            <button
              class="btn btn-primary"
              type="button"
              data-dismiss="modal"
              onclick="Auth.logout()"
            >
              Logout
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- Bootstrap core JavaScript-->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    
    <!-- jQuery Validation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.5/jquery.validate.min.js"></script>
    <!-- jQuery BlockUI -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.blockUI/2.70/jquery.blockUI.min.js"></script>

    <!-- Core plugin JavaScript-->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>
    <!-- Custom scripts for all pages-->
    <script src="js/sb-admin-2.min.js"></script>
    <!-- SPA plugin -->
    <script src="js/jquery.spapp.js"></script>
    <script src="js/jquery.spapp.min.js"></script>
    <!-- Utils and API helper -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="utils/constants.js"></script>
    <script src="utils/utils.js"></script>
    <script src="utils/rest-client.js"></script>
    <!-- Auth utilities -->
    <script src="js/auth.js"></script>
    <script src="js/menu.js"></script>
    <script src="js/bootstrap.js"></script>
    <!-- Import controllers -->
    <script src="js/controllers/books.js"></script>
    <script src="js/controllers/authors.js"></script>
    <script src="js/controllers/categories.js"></script>
    <script src="js/controllers/members.js"></script>
    <script src="js/controllers/borrowing-books.js"></script>

    <!-- Import main js -->
    <script src="js/main.js"></script>

    <!-- Chart.js for dashboard example-->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      (function(){
        function setTopbarName(){
          RestClient.get('/users/me', function(resp){
            var u = resp?.data || resp;
            var name = ((u?.firstName||'') + ' ' + (u?.lastName||'')).trim();
            if (!name) name = u?.username || '';
            var el = document.getElementById('topbarUserName');
            if (el) el.textContent = name || '';
          }, function(){
            var token = localStorage.getItem('user_token');
            var p = Utils.parseJwt(token);
            var u = p?.user;
            var name = ((u?.firstName||'') + ' ' + (u?.lastName||'')).trim();
            if (!name) name = u?.username || '';
            var el = document.getElementById('topbarUserName');
            if (el) el.textContent = name || '';
          });
        }
        setTopbarName();
        try { window.addEventListener('auth:updated', setTopbarName); } catch (e) {}
      })();
      const ctx1 = document.getElementById("borrowChart").getContext("2d");
      new Chart(ctx1, {
        type: "line",
        data: {
          labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun"],
          datasets: [
            {
              label: "Books Borrowed",
              data: [50, 60, 70, 65, 90, 100],
              backgroundColor: "rgba(78, 115, 223, 0.05)",
              borderColor: "#4e73df",
            },
          ],
        },
      });

      const ctx2 = document.getElementById("categoryChart").getContext("2d");
      new Chart(ctx2, {
        type: "doughnut",
        data: {
          labels: ["Fiction", "Science", "History"],
          datasets: [
            {
              data: [55, 25, 20],
              backgroundColor: ["#4e73df", "#1cc88a", "#36b9cc"],
            },
          ],
        },
      });
    </script>
    <script>
      document
        .getElementById("settingsForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          const name = document.getElementById("fullName").value;
          const email = document.getElementById("email").value;

          alert(`Settings updated for ${name} (${email})`);
        });
    </script>
  </body>
</html>
